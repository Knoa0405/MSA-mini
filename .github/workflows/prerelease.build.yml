on:
  push:
    branches:
      - master
  workflow_dispatch:
    inputs:
      semver:
        description: 'Which version you want to increment? Use MAJOR, MINOR or PATCH'
        required: true
        default: 'PATCH'
      label:
        description: 'Add Labels. i.e final, alpha, rc'
        required: false
        default: ''

changelog:
  exclude:
    labels:
      - ignore-for-release
    authors:
      - octocat
  categories:
    - title: Breaking Changes ğŸ› 
      labels:
        - Semver-Major
        - breaking-change
    - title: Exciting New Features ğŸ‰
      labels:
        - Semver-Minor
        - enhancement
    - title: Other Changes
      labels:
        - "*"

jobs:
  release:
    name: 'Release'
    runs-on: 'ubuntu-latest'

    steps:
      # Checkout sources
      - name: 'Checkout'
        uses: actions/checkout@v2

      # ...
      - name: 'ğŸ‘·â€â™‚ï¸ Build'
        run: |
          echo "BUILD COMPLETE ğŸ‘"

      # ...
      - name: 'ğŸ§ª TEST'
        run: |
          echo "TESTS PASSED ğŸ‰"

      # This action may not exist, please check
      - name: 'âš™ GENERATE RELEASE NOTES'
        id: 'gen-notes'
        uses: 'rui-costa/action-auto-generate-release-notes@1.1.1'

      - uses: 'rui-costa/action-automatic-semver-releases@1.1.1'
        with:
          TOKEN: '${{ secrets.GITHUB_TOKEN }}'
          SEMVER: '${{ github.event.inputs.semver }}'
          LABEL: '${{ github.event.inputs.label }}'
          NOTES: '${{ steps.gen-notes.outputs.notes }}'